import{c as D}from"./AuthenticatedHeaderLayout.vue_vue_type_script_setup_true_lang-C2X-ZVUt.js";import{z as P,q as u,k as E,a as F}from"./app--1P3JmIr.js";/**
 * @license lucide-vue-next v0.465.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x=D("MinusIcon",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-vue-next v0.465.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=D("PlusIcon",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),k=P("openingStore",()=>{const c={left:"Левый проем",right:"Правый проем",center:"Центральный проем","inner-left":"Входная группа левая","inner-right":"Входная группа правая"},o={left:"https://llymar.ru/assets/openings-left.jpg",right:"https://llymar.ru/assets/openings-right.jpg",center:"https://llymar.ru/assets/openings-center.jpg","inner-left":"https://llymar.ru/assets/openings-inner-left.jpg","inner-right":"https://llymar.ru/assets/openings-inner-right.jpg","blind-glazing":"https://llymar.ru/assets/openings-blind-glazing.jpg",triangle:"https://llymar.ru/assets/openings-triangle.jpg"},d=u([{doors:2,width:3e3,height:2700,type:"left"}]);return{openingTypes:c,opening_images:o,openings:d,addOpening:()=>{d.value.push({doors:2,width:3e3,height:2700,type:"left"})},removeOpening:a=>{d.value.splice(a,1)}}}),Q=c=>1-c/100,U=P("itemsStore",()=>{const c=k(),o=u([]),d=u([]),h=u([]),f=u([]),a=u({}),q=u({}),M=u([]),p=u(287);E(p,s=>{O(s),I()},{deep:!0}),E(M,(s,n)=>{R(s),I()},{deep:!0}),E(a,s=>{Object.keys(s).forEach(n=>{s[+n].quantity===0&&delete s[+n]}),sessionStorage.setItem("cartItems",JSON.stringify(s))},{deep:!0});const v=["left","right"],L=["inner-left","inner-right"],m=["center"],b=()=>{sessionStorage.getItem("cartItems")?a.value=JSON.parse(sessionStorage.getItem("cartItems")):(p.value=h.value[0].id,[...o.value,...d.value].forEach(n=>{a.value[n.id]={quantity:0}}))},g=s=>{var r;const n=o.value.find(l=>l.vendor_code===s);return((r=a.value[n==null?void 0:n.id])==null?void 0:r.quantity)||0},j=(s,n,r)=>{var t,e;return((e=(t={left:{L1:{2:0,3:1,4:0,5:1,6:2,7:1,8:2},L3:{2:1,3:0,4:2,5:1,6:0,7:2,8:1}},right:{L1:{2:0,3:1,4:0,5:1,6:2,7:1,8:2},L3:{2:1,3:0,4:2,5:1,6:0,7:2,8:1}},center:{L1:{4:0,6:1,8:0,10:1},L3:{4:1,6:0,8:2,10:1}},"inner-left":{L1:{3:0},L3:{3:1}},"inner-right":{L1:{3:0},L3:{3:1}}}[r])==null?void 0:t[s])==null?void 0:e[n])??0},N=s=>{const{vendor_code:n}=s,r=c.openings,l={L1:()=>r.reduce((t,{type:e,width:i,doors:S})=>{let y=Math.ceil(i/1e3/3)*3,_=j(n,S,e);return t+y*_},0),L2:()=>g("L1"),L3:()=>r.reduce((t,{type:e,width:i,doors:S})=>{let y=Math.ceil(i/1e3/3)*3,_=j(n,S,e);return t+y*_},0),L4:()=>g("L3"),L5:()=>Math.floor(r.reduce((t,{width:e})=>t+e-1800,0)/1e3+3),L6:()=>r.length*6,L8:()=>r.reduce((t,{type:e,doors:i})=>v.includes(e)?t+(i*2-2):m.includes(e)?t+(i*2-4):L.includes(e)?t+2:t,0),L9:()=>r.reduce((t,{type:e})=>t+([...m,...L].includes(e)?1:0),0),L12:()=>g("L9")*9+g("L2")*6+g("L4")*4,L13:()=>g("L8")*3+g("L5")*2,L14:()=>g("L6")*2,L15:()=>r.reduce((t,{type:e,doors:i})=>t+(e==="right"?i-1:0)+(m.includes(e)?i/2-1:0)+(e==="inner-right"?1:0),0),L16:()=>r.reduce((t,{type:e,doors:i})=>t+(m.includes(e)?i/2:0)+(e==="left"?1:0)+(e==="right"?i:0)+(e==="inner-left"?1:0)+(e==="inner-right"?2:0),0),L17:()=>r.reduce((t,{type:e})=>t+([...m,...L].includes(e)?1:0),0),L18:()=>r.reduce((t,{type:e,doors:i})=>t+(e==="left"?i-1:0)+(m.includes(e)?i/2-1:0)+(e==="inner-left"?1:0),0),L19:()=>r.reduce((t,{type:e,doors:i})=>t+(e==="left"?i:0)+(e==="right"?1:0)+(e==="center"?i/2:0)+(e==="inner-left"?2:0)+(e==="inner-right"?1:0),0),L20:()=>r.reduce((t,{type:e})=>t+(e==="center"?1:0)+(L.includes(e)?1:0),0),L21:()=>r.reduce((t,{type:e,doors:i})=>t+(e==="center"?i-2:0)+(v.includes(e)?i-1:0)+(L.includes(e)?1:0),0),L22:()=>r.reduce((t,{type:e,doors:i})=>t+(e==="center"?i-4:0)+(v.includes(e)?i-2:0),0),L26:()=>r.reduce((t,{doors:e})=>t+e*2,0)};return l[n]?l[n]():0},O=s=>{h.value.forEach(n=>{delete a.value[n.id]}),a.value[s]={quantity:c.openings.reduce((n,{width:r,height:l})=>n+r*l,0)/1e6}},R=s=>{f.value.forEach(n=>{delete a.value[n.id]}),s.forEach(n=>{a.value[n]={quantity:1}})},I=()=>{o.value.forEach(s=>{const n=N(s);a.value[s.id]={quantity:n}}),O(p.value)},T=F(()=>{let s=0,n=0;return[...o.value,...d.value,...h.value,...f.value].forEach(l=>{var e;const t=((e=a.value[l.id])==null?void 0:e.quantity)||0;t&&(s+=l.retail_price*t,n+=l.retail_price*t*Q(l.discount||q.value.discount))}),{without_discount:s,with_discount:n}});return{items:o,glasses:h,services:f,selectedGlassID:p,selectedServicesID:M,additional_items:d,cartItems:a,total_price:T,calculate:I,initiateCartItems:b,getItemInfo:s=>[...o.value,...d.value,...h.value,...f.value].find(l=>l.id===s),user:q}}),W=c=>new Intl.NumberFormat("ru-RU",{style:"currency",currency:"RUB",minimumFractionDigits:0,maximumFractionDigits:0}).format(c),Y=c=>`/storage${c}`;export{x as M,J as P,U as a,W as c,Q as d,Y as g,k as u};
