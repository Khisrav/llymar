import{M as W,P as Z,u as J,a as S,g as P,c as g}from"./getImageSource-Dl6JMhYe.js";import{x as q,k as ee,I as M,X as se,c as b,M as te,K as le,j as ae,z as oe,q as ne,G as de,Y as re,U as ie,F as ce,V as ue,_ as w,a as pe,b as me}from"./Button.vue_vue_type_script_setup_true_lang-DaeYY_Of.js";import{d as _,o as c,c as h,w as i,r as v,n as E,g as T,u as e,a as $,b as n,m as V,e as s,f as O,h as fe,i as _e,j as f,t as m,k as D,F as y,l as k,p as B,q as F,s as j,v as he,Q as C,Z as xe}from"./app--1P3JmIr.js";import{c as x,_ as ge,a as ye,b as ve,d as be,e as G,f as ke,g as we}from"./AuthenticatedHeaderLayout.vue_vue_type_script_setup_true_lang-C2X-ZVUt.js";import{_ as U}from"./Input.vue_vue_type_script_setup_true_lang-CBLQkMvh.js";/**
 * @license lucide-vue-next v0.465.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=x("ArrowRightIcon",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-vue-next v0.465.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=x("CheckIcon",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-vue-next v0.465.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=x("ChevronDownIcon",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-vue-next v0.465.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=x("ChevronUpIcon",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-vue-next v0.465.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=x("CirclePlusIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-vue-next v0.465.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ce=x("EllipsisVerticalIcon",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-vue-next v0.465.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=x("EyeOffIcon",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-vue-next v0.465.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=x("EyeIcon",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-vue-next v0.465.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=x("PrinterIcon",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);/**
 * @license lucide-vue-next v0.465.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=x("ScrollTextIcon",[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]]);/**
 * @license lucide-vue-next v0.465.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=x("Trash2Icon",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),L=_({__name:"Select",props:{open:{type:Boolean},defaultOpen:{type:Boolean},defaultValue:{},modelValue:{},dir:{},name:{},autocomplete:{},disabled:{type:Boolean},required:{type:Boolean}},emits:["update:modelValue","update:open"],setup(p,{emit:t}){const a=q(p,t);return(l,o)=>(c(),h(e(ee),E(T(e(a))),{default:i(()=>[v(l.$slots,"default")]),_:3},16))}}),N=_({__name:"SelectTrigger",props:{disabled:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(p){const t=p,d=$(()=>{const{class:a,...l}=t;return l}),r=M(d);return(a,l)=>(c(),h(e(te),V(e(r),{class:e(b)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:truncate text-start",t.class)}),{default:i(()=>[v(a.$slots,"default"),n(e(se),{"as-child":""},{default:i(()=>[n(e(H),{class:"w-4 h-4 opacity-50 shrink-0"})]),_:1})]),_:3},16,["class"]))}}),Pe={class:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center"},K=_({__name:"SelectItem",props:{value:{},disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{},class:{}},setup(p){const t=p,d=$(()=>{const{class:a,...l}=t;return l}),r=M(d);return(a,l)=>(c(),h(e(oe),V(e(r),{class:e(b)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t.class)}),{default:i(()=>[s("span",Pe,[n(e(le),null,{default:i(()=>[n(e(A),{class:"h-4 w-4"})]),_:1})]),n(e(ae),null,{default:i(()=>[v(a.$slots,"default")]),_:3})]),_:3},16,["class"]))}}),De=_({__name:"SelectScrollDownButton",props:{asChild:{type:Boolean},as:{},class:{}},setup(p){const t=p,d=$(()=>{const{class:a,...l}=t;return l}),r=M(d);return(a,l)=>(c(),h(e(ne),V(e(r),{class:e(b)("flex cursor-default items-center justify-center py-1",t.class)}),{default:i(()=>[v(a.$slots,"default",{},()=>[n(e(H),{class:"h-4 w-4"})])]),_:3},16,["class"]))}}),Ue=_({__name:"SelectScrollUpButton",props:{asChild:{type:Boolean},as:{},class:{}},setup(p){const t=p,d=$(()=>{const{class:a,...l}=t;return l}),r=M(d);return(a,l)=>(c(),h(e(de),V(e(r),{class:e(b)("flex cursor-default items-center justify-center py-1",t.class)}),{default:i(()=>[v(a.$slots,"default",{},()=>[n(e(Ve),{class:"h-4 w-4"})])]),_:3},16,["class"]))}}),R=_({__name:"SelectValue",props:{placeholder:{},asChild:{type:Boolean},as:{}},setup(p){const t=p;return(d,r)=>(c(),h(e(re),E(T(t)),{default:i(()=>[v(d.$slots,"default")]),_:3},16))}}),Q=_({inheritAttrs:!1,__name:"SelectContent",props:{forceMount:{type:Boolean},position:{default:"popper"},bodyLock:{type:Boolean},side:{},sideOffset:{},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},updatePositionStrategy:{},prioritizePosition:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},emits:["closeAutoFocus","escapeKeyDown","pointerDownOutside"],setup(p,{emit:t}){const d=p,r=t,a=$(()=>{const{class:o,...u}=d;return u}),l=q(a,r);return(o,u)=>(c(),h(e(ue),null,{default:i(()=>[n(e(ce),V({...e(l),...o.$attrs},{class:e(b)("relative z-50 max-h-96 min-w-32 overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",o.position==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",d.class)}),{default:i(()=>[n(e(Ue)),n(e(ie),{class:O(e(b)("p-1",o.position==="popper"&&"h-[--radix-select-trigger-height] w-full min-w-[--radix-select-trigger-width]"))},{default:i(()=>[v(o.$slots,"default")]),_:3},8,["class"]),n(e(De))]),_:3},16,["class"])]),_:3}))}}),z=p=>{switch(p){case"left":case"right":return{min:2,max:8,step:1};case"center":return{min:4,max:10,step:2};case"inner-left":case"inner-right":return{min:3,max:3,step:1};default:return{min:1,max:1/0,step:1}}},qe={class:"flex items-center justify-between gap-2 rounded-md"},X=_({__name:"QuantitySelector",props:fe({min:{},max:{},step:{}},{modelValue:{default:0},modelModifiers:{}}),emits:["update:modelValue"],setup(p){const t=p,d=_e(p,"modelValue"),r=()=>{d.value<t.max&&(d.value+=t.step)},a=()=>{d.value>t.min&&(d.value-=t.step)};return(l,o)=>(c(),f("div",qe,[n(w,{variant:"outline",disabled:d.value<=t.min,class:"rounded-full",size:"icon",onClick:a},{default:i(()=>[n(e(W))]),_:1},8,["disabled"]),n(U,{modelValue:d.value,"onUpdate:modelValue":o[0]||(o[0]=u=>d.value=u),class:"hidden",type:"number"},null,8,["modelValue"]),s("span",null,m(d.value)+" шт.",1),n(w,{variant:"outline",disabled:d.value>=t.max,class:"rounded-full",size:"icon",onClick:r},{default:i(()=>[n(e(Z))]),_:1},8,["disabled"])]))}}),Oe={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-2 md:gap-4"},Ge={class:"flex justify-between items-center gap-2"},Ee={class:"flex-1 overflow-hidden"},Te={class:"grid grid-cols-1 md:grid-cols-1 gap-2"},Fe={class:"flex items-center"},Ae=["src"],He={class:"flex items-center gap-2"},Le={class:"gap-2 mt-2"},Ne={class:"text-center flex flex-col items-center gap-2 p-6"},Ke=_({__name:"Openings",setup(p){const t=J(),d=S();return D(()=>t.openings,r=>{r.forEach(a=>{D(()=>a.type,(l,o)=>{const{min:u,max:I,step:Y}=z(l);a.doors<u||a.doors%Y?a.doors=u:a.doors>I&&(a.doors=I)},{immediate:!0})}),d.calculate()},{deep:!0}),(r,a)=>(c(),f("div",null,[a[5]||(a[5]=s("h2",{class:"text-xl font-bold text-muted-foreground mb-4"},"Проемы",-1)),s("div",Oe,[(c(!0),f(y,null,k(e(t).openings,(l,o)=>(c(),f("div",{key:o,class:"bg-white dark:bg-slate-900 p-2 md:p-4 border rounded-xl hover:shadow-2xl hover:shadow-slate-100 dark:hover:shadow-slate-800 transition-all hover:z-10"},[s("div",Ge,[s("div",Ee,[n(L,{modelValue:e(t).openings[o].type,"onUpdate:modelValue":u=>e(t).openings[o].type=u,class:"h-9 block text-sm"},{default:i(()=>[n(N,{class:"h-9 shadow-sm text-sm"},{default:i(()=>[n(R,{placeholder:"Выберите проем",class:"text-sm"})]),_:1}),n(Q,null,{default:i(()=>[(c(!0),f(y,null,k(e(t).openingTypes,(u,I)=>(c(),h(K,{key:I,value:I,class:"text-sm"},{default:i(()=>[B(m(u),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:2},1032,["modelValue","onUpdate:modelValue"])]),n(w,{variant:"outline",size:"icon",onClick:u=>e(t).removeOpening(o),class:"shrink-0"},{default:i(()=>[n(e(Me),{class:"size-4"})]),_:2},1032,["onClick"])]),s("div",Te,[s("div",Fe,[s("img",{src:e(t).opening_images[l.type],class:"w-full rounded-md mt-2 md:mt-4"},null,8,Ae)]),s("div",null,[a[3]||(a[3]=s("label",{class:"text-center my-1 text-muted-foreground text-xs md:text-sm block"},"Размеры (ШxВ) в мм:",-1)),s("div",He,[n(U,{modelValue:e(t).openings[o].width,"onUpdate:modelValue":u=>e(t).openings[o].width=u,type:"number",step:"100",max:"12800",placeholder:"Ширина",class:"h-9 text-center"},null,8,["modelValue","onUpdate:modelValue"]),a[1]||(a[1]=s("span",{class:"inline-block text-sm"},"✕",-1)),n(U,{modelValue:e(t).openings[o].height,"onUpdate:modelValue":u=>e(t).openings[o].height=u,type:"number",step:"100",placeholder:"Высота",class:"h-9 text-center"},null,8,["modelValue","onUpdate:modelValue"])]),s("div",Le,[a[2]||(a[2]=s("label",{class:"text-center mb-1 text-muted-foreground text-xs md:text-sm block"},"Кол-во створок:",-1)),n(X,{modelValue:l.doors,"onUpdate:modelValue":u=>l.doors=u,min:e(z)(e(t).openings[o].type).min,max:e(z)(e(t).openings[o].type).max,step:e(z)(e(t).openings[o].type).step},null,8,["modelValue","onUpdate:modelValue","min","max","step"])])])])]))),128)),s("button",{class:"p-2 md:p-4 border-4 border-dashed rounded-xl text-center flex items-center justify-center hover:border-black hover:dark:border-white transition-all text-gray-300 dark:text-gray-600 font-bold text-xl hover:text-black hover:dark:text-white",onClick:a[0]||(a[0]=(...l)=>e(t).addOpening&&e(t).addOpening(...l))},[s("div",Ne,[n(e(Ie),{class:"size-12"}),a[4]||(a[4]=s("span",{class:"block"},"Добавить проем",-1))])])])]))}}),Re={class:"border p-2 md:p-4 rounded-2xl"},Qe={class:"flex items-center"},Xe={class:"text-center font-bold text-lg text-primary font-mono"},Ye=["src"],We={class:"text-center text-sm sm:text-base py-2"},Ze={class:"flex items-center justify-between"},Je={class:"flex flex-col items-center justify-between text-xs sm:text-xs"},es={class:"font-bold text-muted-foreground text-sm"},ss={class:"flex flex-col items-center justify-between text-xs sm:text-xs"},ts={class:"font-bold text-muted-foreground text-sm"},ls={class:"text-center pt-2"},as={class:"font-bold"},os=_({__name:"Items",setup(p){const t=S(),d=F(!1);return(r,a)=>(c(),f("div",Re,[s("div",Qe,[a[1]||(a[1]=s("h2",{class:"text-xl font-bold text-muted-foreground"},"Авторасчет",-1)),n(w,{variant:"outline",size:"icon",class:"ml-auto rounded-lg",onClick:a[0]||(a[0]=l=>d.value=!d.value)},{default:i(()=>[d.value?(c(),h(e(Se),{key:1,class:"size-6"})):(c(),h(e(je),{key:0,class:"size-6"}))]),_:1})]),s("div",{class:O([d.value?"hidden":"","grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-2 md:gap-4 mt-4 transition-all duration-1000"])},[(c(!0),f(y,null,k(e(t).items,l=>{var o,u;return c(),f("div",{key:l.id,class:"flex flex-col justify-between gap-2 bg-white dark:bg-slate-900 p-2 md:p-4 border rounded-xl hover:shadow-2xl hover:shadow-slate-100 dark:hover:shadow-slate-800 transition-all hover:z-10"},[s("div",Xe,m(l.vendor_code),1),s("div",null,[s("img",{src:e(P)(l.img),class:"rounded-md w-full"},null,8,Ye)]),s("div",null,[s("div",We,[s("span",null,m(l.name),1)]),s("div",Ze,[s("div",Je,[a[2]||(a[2]=s("span",{class:"text-muted-foreground"},"Цена:",-1)),s("span",es,m(e(g)(l.retail_price))+"/"+m(l.unit),1)]),s("div",ss,[a[3]||(a[3]=s("span",{class:"text-muted-foreground"},"Кол-во:",-1)),s("span",ts,m(((o=e(t).cartItems[l.id])==null?void 0:o.quantity)??0)+" "+m(l.unit),1)])]),s("div",ls,[s("span",as,m(e(g)((((u=e(t).cartItems[l.id])==null?void 0:u.quantity)??0)*l.retail_price)),1)])])])}),128))],2)]))}}),ns=_({__name:"Checkbox",props:{defaultChecked:{type:Boolean},checked:{type:[Boolean,String]},disabled:{type:Boolean},required:{type:Boolean},name:{},value:{},id:{},asChild:{type:Boolean},as:{},class:{}},emits:["update:checked"],setup(p,{emit:t}){const d=p,r=t,a=$(()=>{const{class:o,...u}=d;return u}),l=q(a,r);return(o,u)=>(c(),h(e(me),V(e(l),{class:e(b)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",d.class)}),{default:i(()=>[n(e(pe),{class:"flex h-full w-full items-center justify-center text-current"},{default:i(()=>[v(o.$slots,"default",{},()=>[n(e(A),{class:"h-4 w-4"})])]),_:3})]),_:3},16,["class"]))}}),ds={class:"border p-2 md:p-4 rounded-2xl"},rs={class:"grid grid-cols-1 sm:grid-cols-2 gap-2 md:gap-4"},is={class:"p-2 md:p-4 bg-white dark:bg-slate-900 border rounded-xl hover:shadow-2xl hover:shadow-slate-100 dark:hover:shadow-slate-800 transition-all hover:z-10"},cs={class:"mt-4 flex flex-row gap-2 md:gap-4 justify-between"},us={class:"basis-1/3 md:basis-1/4 order-2 md:order-1"},ps=["src"],ms={class:"flex-1 basis-2/3 md:basis-3/4 order-1 md:order-2"},fs={class:"flex flex-col justify-between h-full"},_s={class:"flex justify-between items-center text-muted-foreground my-1 md:my-2"},hs={key:0,class:"font-bold text-primary"},xs={class:"flex justify-between items-center text-muted-foreground my-1 md:my-2"},gs={key:0,class:"font-bold text-primary"},ys={class:"flex justify-between items-center text-muted-foreground my-1 md:my-2"},vs={key:0,class:"font-bold text-primary"},bs={class:"p-2 md:p-4 bg-white dark:bg-slate-900 border rounded-xl hover:shadow-2xl hover:shadow-slate-100 dark:hover:shadow-slate-800 transition-all hover:z-10"},ks={key:0},ws={class:"font-mono"},$s={class:"flex items-center gap-2 md:gap-4"},Vs={class:"font-bold text-primary"},Is={key:1,class:"flex w-full h-full items-center justify-center"},Cs={class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-4 gap-2 md:gap-4 mt-4 transition-all duration-1000"},Ss={class:"font-medium mb-2 md:mb-4"},js={class:"flex flex-row gap-2 md:gap-4"},zs={class:"basis-1/3"},Bs=["src"],Ms={class:"basis-2/3 flex flex-col justify-between gap-2"},Ps={class:"flex justify-between items-center text-sm text-muted-foreground"},Ds={class:"font-bold text-primary"},Us={class:"flex justify-between items-center text-sm text-muted-foreground"},qs={class:"font-bold text-primary"},Os=_({__name:"Additionals",setup(p){const t=S(),d=F(t.glasses.find(a=>a.id===t.selectedGlassID)||null);D(()=>t.selectedGlassID,a=>{d.value=t.glasses.find(l=>l.id===a)||null});const r=a=>{t.selectedServicesID.includes(a)?t.selectedServicesID=t.selectedServicesID.filter(l=>l!==a):t.selectedServicesID.push(a)};return(a,l)=>(c(),f("div",ds,[l[8]||(l[8]=s("div",{class:"flex items-center mb-4"},[s("h2",{class:"text-xl font-bold text-muted-foreground"},"Детали")],-1)),s("div",rs,[s("div",is,[s("div",null,[n(L,{modelValue:e(t).selectedGlassID,"onUpdate:modelValue":l[0]||(l[0]=o=>e(t).selectedGlassID=o)},{default:i(()=>[n(N,null,{default:i(()=>[n(R,{placeholder:"Выберите стекло"})]),_:1}),n(Q,{class:"max-w-xs sm:max-w-max"},{default:i(()=>[(c(!0),f(y,null,k(e(t).glasses,o=>(c(),h(K,{key:o.id,value:o.id},{default:i(()=>[B(m(o.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])]),s("div",cs,[s("div",us,[d.value?(c(),f("img",{key:0,src:e(P)(d.value.img),class:"rounded-md w-full"},null,8,ps)):j("",!0)]),s("div",ms,[s("div",fs,[s("div",_s,[l[1]||(l[1]=s("span",null,"Цена:",-1)),d.value?(c(),f("span",hs,m(e(g)(d.value.retail_price))+"/"+m(d.value.unit),1)):j("",!0)]),s("div",xs,[l[2]||(l[2]=s("span",null,"Кол-во:",-1)),d.value?(c(),f("span",gs,m(e(t).cartItems[e(t).selectedGlassID].quantity)+" "+m(d.value.unit),1)):j("",!0)]),s("div",ys,[l[3]||(l[3]=s("span",null,"Итого:",-1)),d.value?(c(),f("span",vs,m(e(g)(d.value.retail_price*e(t).cartItems[e(t).selectedGlassID].quantity)),1)):j("",!0)])])])])]),s("div",bs,[e(t).services.length?(c(),f("div",ks,[l[4]||(l[4]=s("div",{class:"flex items-center justify-between gap-2 md:gap-4 mb-2 md:mb-4"},[s("span",{class:"font-semibold"},"Доступные услуги")],-1)),(c(!0),f(y,null,k(e(t).services,o=>(c(),f("div",{key:o.id,class:O(["flex items-center justify-between gap-2 md:gap-4 py-1",{"border-b":o!==e(t).services[e(t).services.length-1]}])},[s("p",null,[s("span",ws,m(o.vendor_code?o.vendor_code+" - ":""),1),B(m(o.name),1)]),s("div",$s,[s("span",Vs,m(e(g)(o.retail_price)),1),n(ns,{checked:e(t).selectedServicesID.includes(o.id),onClick:u=>r(o.id)},null,8,["checked","onClick"])])],2))),128))])):(c(),f("div",Is,l[5]||(l[5]=[s("p",{class:"text-muted-foreground"},"Нет доступных услуг для выбора",-1)])))])]),s("div",Cs,[(c(!0),f(y,null,k(e(t).additional_items,o=>(c(),f("div",{key:o.vendor_code,class:"flex flex-col justify-between p-2 md:p-4 bg-white dark:bg-slate-900 border rounded-xl hover:shadow-2xl hover:shadow-slate-100 dark:hover:shadow-slate-800 transition-all hover:z-10"},[s("p",Ss,[s("span",null,m(o.vendor_code?o.vendor_code+" - ":"")+" "+m(o.name),1)]),s("div",js,[s("div",zs,[s("img",{src:e(P)(o.img),class:"rounded-md w-full"},null,8,Bs)]),s("div",Ms,[s("div",Ps,[l[6]||(l[6]=s("span",null,"Цена:",-1)),s("span",Ds,m(e(g)(o.retail_price))+"/"+m(o.unit),1)]),s("div",Us,[l[7]||(l[7]=s("span",null,"Итого:",-1)),s("span",qs,m(e(g)(o.retail_price*e(t).cartItems[o.id].quantity)),1)]),n(X,{min:0,max:100,step:1,modelValue:e(t).cartItems[o.id].quantity,"onUpdate:modelValue":u=>e(t).cartItems[o.id].quantity=u},null,8,["modelValue","onUpdate:modelValue"])])])]))),128))])]))}}),Gs={class:"z-20 fixed bottom-0 sm:bottom-2 left-1/2 w-full max-w-96 transform -translate-x-1/2 bg-white dark:bg-slate-900 p-2 px-4 sm:p-4 border sm:rounded-xl md:rounded-2xl shadow-sm"},Es={class:"flex items-center justify-between"},Ts={class:"font-bold text-xl text-primary"},Fs={class:"flex gap-2 md:gap-4 items-center"},As=_({__name:"OrderActions",setup(p){const t=S();return(d,r)=>(c(),f(y,null,[r[5]||(r[5]=s("div",{class:"h-6 md:h-10"},null,-1)),s("div",Gs,[s("div",Es,[s("span",Ts,m(e(g)(e(t).total_price.with_discount)),1),s("div",Fs,[n(ke,null,{default:i(()=>[n(ge,null,{default:i(()=>[n(w,{variant:"outline",size:"icon"},{default:i(()=>[n(e(Ce))]),_:1})]),_:1}),n(ye,null,{default:i(()=>[n(ve,null,{default:i(()=>r[1]||(r[1]=[B("Действия")])),_:1}),n(be),n(G,{onClick:r[0]||(r[0]=a=>console.log("clicked"))},{default:i(()=>[n(e(ze),{class:"size-4"}),r[2]||(r[2]=s("span",null,"Печать КП",-1))]),_:1}),n(G,null,{default:i(()=>[n(e(Be),{class:"size-4"}),r[3]||(r[3]=s("span",null,"Перечень",-1))]),_:1})]),_:1})]),_:1}),n(e(he),{href:"/app/cart"},{default:i(()=>[n(w,null,{default:i(()=>[r[4]||(r[4]=s("span",{class:"text-base"},"В корзину",-1)),n(e($e),{class:"size-4"})]),_:1})]),_:1})])])])],64))}}),Hs={class:"container p-2 rounded-xl"},Ls={class:""},Ys=_({__name:"Calculator",setup(p){const t=S();return t.items=C().props.items,t.additional_items=C().props.additional_items,t.glasses=C().props.glasses,t.services=C().props.services,t.user=C().props.user,t.initiateCartItems(),t.calculate(),(d,r)=>(c(),f(y,null,[n(e(xe),{title:"Калькулятор"}),n(we),s("div",Hs,[r[0]||(r[0]=s("h1",{class:"text-2xl font-bold"},"Калькулятор",-1)),s("div",Ls,[n(Ke,{class:"mb-8"}),n(Os,{class:"mb-8"}),n(os,{class:"mb-8"})])]),n(As)],64))}});export{Ys as default};
